(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function O(e){const n=document.getElementById("game-board");n.innerHTML="";for(let t=0;t<25;t++){const r=document.createElement("div");r.classList.add("cell"),r.addEventListener("click",()=>e(t)),n.appendChild(r)}}function M(e){document.querySelectorAll(".cell").forEach((t,r)=>{t.textContent=e[r],t.className="cell",e[r]==="X"&&t.classList.add("player-x"),e[r]==="O"&&t.classList.add("player-o"),e[r]==="N"&&t.classList.add("player-n")})}function B(e){const n=[[0,1,2,3],[1,2,3,4],[5,6,7,8],[6,7,8,9],[10,11,12,13],[11,12,13,14],[15,16,17,18],[16,17,18,19],[20,21,22,23],[21,22,23,24],[0,5,10,15],[1,6,11,16],[2,7,12,17],[3,8,13,18],[4,9,14,19],[5,10,15,20],[6,11,16,21],[7,12,17,22],[8,13,18,23],[9,14,19,24],[0,6,12,18],[1,7,13,19],[3,7,11,15],[4,8,12,16],[5,11,17,23],[6,12,18,24],[8,12,16,20],[9,13,17,21]];for(const t of n){const[r,s,o,c]=t;if(e[r]&&e[r]===e[s]&&e[r]===e[o]&&e[r]===e[c])return{winner:e[r],pattern:t}}for(let t=0;t<4;t++)for(let r=0;r<4;r++){const s=t*5+r;if(e[s]&&e[s]===e[s+1]&&e[s]===e[s+5]&&e[s]===e[s+6])return{winner:e[s],pattern:[s,s+1,s+5,s+6]}}return e.every(t=>t!=="")?{winner:"draw",pattern:null}:{winner:null,pattern:null}}function k(e,n,t,r){let s;switch(t){case"easy":s=g(e);break;case"medium":s=Math.random()<.5?g(e):I(e,n);break;case"hard":s=I(e,n);break;default:s=g(e)}s!==void 0&&r(s)}function g(e){const n=e.reduce((t,r,s)=>(r===""&&t.push(s),t),[]);return n[Math.floor(Math.random()*n.length)]}function I(e,n){const t=w(e,n);if(t!==-1)return t;const r=["X","O","N"].filter(l=>l!==n);for(let l of r){const m=w(e,l);if(m!==-1)return m}const s=v(e,n);if(s!==-1)return s;for(let l of r){const m=v(e,l);if(m!==-1)return m}const o=C(e,n);if(o!==-1)return o;const c=[0,4,20,24,12];for(let l of c)if(e[l]==="")return l;return g(e)}function w(e,n){for(let t=0;t<e.length;t++)if(e[t]===""){const r=[...e];if(r[t]=n,B(r).winner===n)return t}return-1}function v(e,n){for(let t=0;t<e.length;t++)if(e[t]===""){const r=[...e];r[t]=n;let s=0;for(let o=0;o<e.length;o++)if(r[o]===""){const c=[...r];c[o]=n,B(c).winner===n&&s++}if(s>=2)return t}return-1}function C(e,n){const t=[[0,1,2,3],[1,2,3,4],[5,6,7,8],[6,7,8,9],[10,11,12,13],[11,12,13,14],[15,16,17,18],[16,17,18,19],[20,21,22,23],[21,22,23,24],[0,5,10,15],[5,10,15,20],[1,6,11,16],[6,11,16,21],[2,7,12,17],[7,12,17,22],[3,8,13,18],[8,13,18,23],[4,9,14,19],[9,14,19,24],[0,6,12,18],[6,12,18,24],[4,8,12,16],[8,12,16,20],[0,1,5,6],[1,2,6,7],[2,3,7,8],[3,4,8,9],[5,6,10,11],[6,7,11,12],[7,8,12,13],[8,9,13,14],[10,11,15,16],[11,12,16,17],[12,13,17,18],[13,14,18,19],[15,16,20,21],[16,17,21,22],[17,18,22,23],[18,19,23,24]];for(let r of t){const s=r.filter(l=>e[l]===""),o=r.filter(l=>e[l]===n),c=r.filter(l=>e[l]!==""&&e[l]!==n);if(s.length===2&&o.length===2&&c.length===0)return s[0]}return-1}let a="X",L="medium",u=Array(25).fill(""),i={X:0,O:0,N:0},d=1,f=10;document.addEventListener("DOMContentLoaded",()=>{document.getElementById("start-series").addEventListener("click",$),document.getElementById("new-game").addEventListener("click",p),document.getElementById("new-series").addEventListener("click",y),document.getElementById("close-stats").addEventListener("click",G),document.getElementById("help-button").addEventListener("click",j),document.getElementById("close-rules").addEventListener("click",F),document.getElementById("abandon-series").addEventListener("click",H),O(x),y()});function y(){document.getElementById("setup-screen").style.display="flex",document.getElementById("game-screen").style.display="none"}function X(){document.getElementById("setup-screen").style.display="none",document.getElementById("game-screen").style.display="flex"}function $(){f=parseInt(document.getElementById("series-length").value),L=document.getElementById("difficulty").value,i={X:0,O:0,N:0},d=1,P(),p(),document.getElementById("series-stats").style.display="none";const e=document.getElementById("player-name"),n=document.querySelector("#player-progress .player-name");e&&n&&(n.textContent=e.value||"Player"),X(),S()}function p(){u=Array(25).fill(""),a="X",M(u),document.getElementById("status").textContent="",S(),document.querySelectorAll(".cell").forEach(n=>{n.classList.remove("winning-cell")})}function S(){document.getElementById("game-progress").textContent=`Game ${d} of ${f}`}function P(){h("player-progress",i.X),h("blocker-progress",i.O),h("hunter-progress",i.N)}function h(e,n){const t=document.querySelector(`#${e} .progress`),r=document.querySelector(`#${e} .progress-text`);if(t&&r){const s=n/f*100;t.style.width=`${s}%`,r.textContent=n.toString()}else console.error(`Progress bar not found: ${e}`)}function x(e){if(!(d>f))if(u[e]===""){u[e]=a,M(u);const{winner:n,pattern:t}=B(u);n?A(n,t):(a=W(a),a!=="X"&&k(u,a,L,x))}else console.log("This cell is already occupied or the game has ended. Please start a new game.")}function A(e,n){e==="draw"?q():(i[e]+=1,P(),document.getElementById("status").textContent=`${E(e)} wins!`,T(n),setTimeout(()=>{d>=f?N():(d++,p())},3e3))}function q(){document.getElementById("status").textContent="It's a draw!",setTimeout(()=>{d>=f?N():(d++,p())},3e3)}function T(e){if(e){const n=document.querySelectorAll(".cell");e.forEach(t=>{n[t]&&n[t].classList.add("winning-cell")})}}function N(){const e=Math.max(i.X,i.O,i.N),n=Object.keys(i).filter(t=>i[t]===e);if(document.getElementById("series-stats").style.display="flex",n.length>1)document.getElementById("series-winner").textContent="Series Result: It's a draw!";else{const t=n[0];document.getElementById("series-winner").textContent=`Series Winner: ${E(t)}`}document.getElementById("player-wins").textContent=`${E("X")} wins: ${i.X}`,document.getElementById("blocker-wins").textContent=`Blocker wins: ${i.O}`,document.getElementById("hunter-wins").textContent=`Hunter wins: ${i.N}`}function G(){document.getElementById("series-stats").style.display="none",y()}function E(e){if(e==="X")return document.getElementById("player-name").value||"Player";if(e==="O")return"Blocker";if(e==="N")return"Hunter"}function W(e){const n=["X","O","N"],t=n.indexOf(e);return n[(t+1)%n.length]}function j(){const e=document.getElementById("rules-modal");e.style.display="flex"}function F(){const e=document.getElementById("rules-modal");e.style.display="none"}function H(){alert("Series abandoned."),y()}
